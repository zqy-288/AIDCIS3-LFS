# Git åˆå¹¶å†²çªè¯¦ç»†æŠ¥å‘Š

**åˆå¹¶åˆ†æ”¯**: `origin/main` â†’ `wsy_2`  
**åˆå¹¶æ—¶é—´**: 2025-07-13  
**åˆå¹¶ç­–ç•¥**: ä¸‰æ–¹åˆå¹¶ (three-way merge)

## å†²çªæ¦‚è§ˆ

åœ¨ `origin/main` åˆå¹¶åˆ° `wsy_2` çš„è¿‡ç¨‹ä¸­ï¼Œåªæœ‰ä¸€ä¸ªæ–‡ä»¶äº§ç”Ÿäº†å†²çªï¼š

| æ–‡ä»¶è·¯å¾„ | å†²çªç±»å‹ | å†²çªåŒºåŸŸæ•°é‡ | ä¸»è¦å·®å¼‚ |
|---------|---------|-------------|----------|
| `src/modules/realtime_chart.py` | å†…å®¹å†²çª | 4ä¸ªåŒºåŸŸ | è®¾è®¡é£æ ¼ã€æ¶æ„æ–¹å¼ã€åŠŸèƒ½ç‰¹æ€§å·®å¼‚ |

---

# src/modules/realtime_chart.py å®Œæ•´å†²çªåˆ†æ

## ğŸ”´ å†²çªåŒºåŸŸ1: ç¬¬164-197è¡Œ - çŠ¶æ€é¢æ¿å’ŒUIåˆå§‹åŒ–

### **wsy_2åˆ†æ”¯ç‰ˆæœ¬ (Material Designç»¿è‰²ä¸»é¢˜)**
```python
# ç¬¬164-190è¡Œ
        # çŠ¶æ€ä¿¡æ¯é¢æ¿ - ä¼˜åŒ–æ ·å¼
        status_group = QGroupBox("æ£€æµ‹çŠ¶æ€")
        status_group.setStyleSheet("""
            QGroupBox {
                font-weight: bold;
                font-size: 12px;
                border: 2px solid #cccccc;
                border-radius: 8px;
                margin-top: 8px;
                padding-top: 8px;
            }
            QGroupBox::title {
                subcontrol-origin: margin;
                left: 10px;
                padding: 0 5px 0 5px;
                color: #333333;
            }
        """)
        status_layout = QHBoxLayout(status_group)

        # å½“å‰å­”ä½æ˜¾ç¤º - æ”¹ä¸ºæ–‡æœ¬æ˜¾ç¤ºï¼Œå¢å¤§å­—ä½“
        self.current_hole_label = QLabel("å½“å‰å­”ä½ï¼šæœªé€‰æ‹©")
        self.current_hole_label.setStyleSheet("""
            QLabel {
                font-size: 14px;
                font-weight: bold;
                color: #2196F3;
                padding: 8px 12px;
                background-color: #f0f8ff;
                border: 2px solid #2196F3;
                border-radius: 6px;
            }
        """)

# ç¬¬188-197è¡Œ (æ¥ç»­)
=======

# ç¬¬192-197è¡Œ
        layout.addWidget(splitter)

        # ä¿å­˜åˆ†å‰²å™¨å¼•ç”¨ï¼Œç”¨äºåç»­è°ƒæ•´
        self.main_splitter = splitter

        # å»¶è¿Ÿè®¾ç½®åˆ†å‰²å™¨æ¯”ä¾‹ï¼Œç¡®ä¿çª—å£å·²å®Œå…¨åˆå§‹åŒ–
>>>>>>> origin/main
```

### **mainåˆ†æ”¯ç‰ˆæœ¬ (ç°ä»£ç§‘æŠ€è“ä¸»é¢˜ + ObjectNameç®¡ç†)**
```python
# ç¬¬164-197è¡Œ
        # çŠ¶æ€ä¿¡æ¯é¢æ¿ - ä¼˜åŒ–ä¸ºä»ªè¡¨ç›˜æ ·å¼ï¼Œé›†æˆæ§åˆ¶æŒ‰é’®
        status_group = QGroupBox("çŠ¶æ€ç›‘æ§ä¸ä¸»æ§åˆ¶åŒº")
        status_group.setObjectName("StatusDashboard")
        status_layout = QHBoxLayout(status_group)

        # å·¦ä¾§ï¼šæ ¸å¿ƒçŠ¶æ€ä¿¡æ¯
        status_info_layout = QHBoxLayout()
        status_info_layout.setSpacing(20)

        # å½“å‰å­”ä½æ˜¾ç¤º - æ”¹ä¸ºæ–‡æœ¬æ˜¾ç¤ºï¼Œå¢å¤§å­—ä½“
        self.current_hole_label = QLabel("å½“å‰å­”ä½ï¼šæœªé€‰æ‹©")
        self.current_hole_label.setObjectName("InfoLabel")
        self.current_hole_label.setMinimumWidth(140)

        # é€šä¿¡çŠ¶æ€æ˜¾ç¤º - å¼ºåŒ–å…³é”®çŠ¶æ€ï¼Œå‡†å¤‡æ·»åŠ å›¾æ ‡
        self.comm_status_label = QLabel("é€šä¿¡çŠ¶æ€: ç­‰å¾…è¿æ¥")
        self.comm_status_label.setObjectName("CommStatusLabel")
        self.comm_status_label.setMinimumWidth(150)

        # æ¢å¤´æ·±åº¦æ˜¾ç¤º - æ·»åŠ æ•°æ®çŠ¶æ€
        self.depth_label = QLabel("ğŸ“ æ¢å¤´æ·±åº¦: -- mm")
        self.depth_label.setObjectName("StaticInfoLabel")
        self.depth_label.setMinimumWidth(160)

        # æœ€å¤§/æœ€å°ç›´å¾„æ˜¾ç¤º - å¢å¼ºçŠ¶æ€å¯è§†åŒ–
        self.max_diameter_label = QLabel("ğŸ“ˆ æœ€å¤§ç›´å¾„: -- mm")
        self.max_diameter_label.setObjectName("StaticInfoLabel")
        self.max_diameter_label.setMinimumWidth(150)

        self.min_diameter_label = QLabel("ğŸ“‰ æœ€å°ç›´å¾„: -- mm")
        self.min_diameter_label.setObjectName("StaticInfoLabel")
        self.min_diameter_label.setMinimumWidth(150)

        # æ·»åŠ çŠ¶æ€ä¿¡æ¯åˆ°å¸ƒå±€
        status_info_layout.addWidget(self.current_hole_label)
        status_info_layout.addWidget(self.comm_status_label)
        status_info_layout.addWidget(self.depth_label)
        status_info_layout.addWidget(self.max_diameter_label)
        status_info_layout.addWidget(self.min_diameter_label)

        status_layout.addLayout(status_info_layout)

        # å³ä¾§ï¼šä¸»æ§åˆ¶æŒ‰é’®ï¼ˆç§»è‡³çŠ¶æ€æ å†…ï¼Œé›†æˆè®¾è®¡ï¼‰
        control_layout = QHBoxLayout()
        control_layout.setSpacing(15)

        self.start_button = QPushButton("â–¶ï¸ å¼€å§‹æµ‹é‡")
        self.start_button.setObjectName("StartButton")
        self.stop_button = QPushButton("â¹ï¸ åœæ­¢æµ‹é‡")
        self.stop_button.setObjectName("StopButton")
        self.clear_button = QPushButton("ğŸ—‘ï¸ æ¸…é™¤æ•°æ®")
        self.clear_button.setObjectName("ClearDataButton")

        control_layout.addWidget(self.start_button)
        control_layout.addWidget(self.stop_button)
        control_layout.addWidget(self.clear_button)

        status_layout.addLayout(control_layout)

        layout.addWidget(status_group)
```

## ğŸ”´ å†²çªåŒºåŸŸ2: ç¬¬203-259è¡Œ - é¢æ¿å¸ƒå±€å’Œå›¾è¡¨è®¾ç½®

### **wsy_2åˆ†æ”¯ç‰ˆæœ¬**
```python
# ç¬¬203-227è¡Œ
        # åŒé¢æ¿åŒºåŸŸ - æ”¹ä¸ºå‚ç›´å¸ƒå±€ï¼ˆAåœ¨ä¸Šï¼ŒBåœ¨ä¸‹ï¼‰
        splitter = QSplitter(Qt.Vertical)

        # é¢æ¿A: ç®¡å­”ç›´å¾„æ•°æ® - æ— è¾¹æ¡†è®¾è®¡ï¼Œæœ€å¤§åŒ–å†…å®¹åŒºåŸŸ
        panel_a = QGroupBox("å…‰è°±å…±ç„¦ä¼ æ„Ÿå™¨å­”å¾„ç›‘æµ‹æ•°æ®")
        panel_a.setStyleSheet("""
            QGroupBox {
                font-weight: bold;
                font-size: 16px;
                border: 3px solid #4CAF50;
                border-radius: 12px;
                margin-top: 15px;
                padding-top: 15px;
                background-color: #f8fff8;
            }
            QGroupBox::title {
                subcontrol-origin: margin;
                left: 20px;
                padding: 5px 15px 5px 15px;
                color: #2E7D32;
                background-color: white;
                font-size: 16px;
                font-weight: bold;
                border: 2px solid #4CAF50;
                border-radius: 8px;
            }
        """)

# ç¬¬227-259è¡Œ (æ¥ç»­)
=======

        # é¢æ¿Aå·¦ä¾§ï¼šå›¾è¡¨åŒºåŸŸï¼ˆmatplotlibï¼‰
        chart_widget = QWidget()
        chart_layout = QVBoxLayout(chart_widget)
        
        # æ·»åŠ å­”å¾„ç›‘æµ‹å›¾çš„è¯´æ˜ä¿¡æ¯
        chart_info_widget = QWidget()
        chart_info_layout = QHBoxLayout(chart_info_widget)
        chart_info_layout.setContentsMargins(10, 5, 10, 5)
        
        chart_info_label = QLabel("å…‰è°±å…±ç„¦ä¼ æ„Ÿå™¨å­”å¾„ç›‘æµ‹æ•°æ®")
        chart_info_label.setStyleSheet("""
            QLabel {
                font-size: 14px;
                font-weight: bold;
                color: #2E7D32;
                background-color: #e8f5e8;
                padding: 8px 15px;
                border: 1px solid #4CAF50;
                border-radius: 6px;
            }
        """)
        
        chart_info_layout.addWidget(chart_info_label)
        chart_info_layout.addStretch()
        
        chart_layout.addWidget(chart_info_widget)

        # åˆ›å»ºmatplotlibå›¾å½¢ï¼Œä¼˜åŒ–å°ºå¯¸ä»¥æœ€å¤§åŒ–æ˜¾ç¤ºåŒºåŸŸ
        self.figure = Figure(figsize=(24, 12), dpi=100)
        self.canvas = FigureCanvas(self.figure)
        chart_layout.addWidget(self.canvas)

        # è¿æ¥é¼ æ ‡äº‹ä»¶ç”¨äºç¼©æ”¾å’Œé‡ç½®
        self.canvas.mpl_connect('scroll_event', self.on_scroll)
        self.canvas.mpl_connect('button_press_event', self.on_mouse_press)

        # åˆ›å»ºå­å›¾ - å¢å¤§å­—ä½“
        self.ax = self.figure.add_subplot(111)
        self.ax.set_xlabel('æ¢å¤´æ·±åº¦ (mm)', fontsize=14, fontweight='bold')
        self.ax.set_ylabel('å­”å¾„ç›´å¾„ (mm)', fontsize=14, fontweight='bold')
        self.ax.set_title('å®æ—¶å­”å¾„ç›‘æµ‹æ•°æ®', fontsize=16, fontweight='bold', pad=20,
                         bbox=dict(boxstyle="round,pad=0.3", facecolor="#e8f5e8", edgecolor="#4CAF50"))
        self.ax.grid(True, alpha=0.3)
>>>>>>> origin/main
```

### **mainåˆ†æ”¯ç‰ˆæœ¬**
```python
# ç¬¬203-259è¡Œ
        # åŒé¢æ¿åŒºåŸŸ - æ”¹ä¸ºå‚ç›´å¸ƒå±€ï¼ˆAåœ¨ä¸Šï¼ŒBåœ¨ä¸‹ï¼‰
        splitter = QSplitter(Qt.Vertical)

        # é¢æ¿A: ç®¡å­”ç›´å¾„æ•°æ® - æ— è¾¹æ¡†è®¾è®¡ï¼Œæœ€å¤§åŒ–å†…å®¹åŒºåŸŸ
        panel_a_widget = QWidget()
        panel_a_widget.setObjectName("PanelAWidget")
        panel_a_layout = QHBoxLayout(panel_a_widget)  # æ°´å¹³å¸ƒå±€ï¼šå›¾è¡¨åœ¨å·¦ï¼Œå¼‚å¸¸çª—å£åœ¨å³
        panel_a_layout.setContentsMargins(8, 8, 8, 8)  # å‡å°‘è¾¹è·
        panel_a_layout.setSpacing(10)

        # é¢æ¿Aå·¦ä¾§ï¼šå›¾è¡¨åŒºåŸŸï¼ˆmatplotlibï¼‰
        chart_widget = QWidget()
        chart_widget.setObjectName("ChartWidget")
        chart_layout = QVBoxLayout(chart_widget)
        chart_layout.setContentsMargins(0, 0, 0, 0)  # ç§»é™¤è¾¹è·ï¼Œæœ€å¤§åŒ–å›¾è¡¨åŒºåŸŸ

        # åˆ›å»ºå›¾è¡¨æ ‡é¢˜æ 
        chart_header = QWidget()
        chart_header.setObjectName("PanelHeader")
        chart_header_layout = QHBoxLayout(chart_header)
        chart_header_layout.setContentsMargins(15, 0, 15, 0)  # å·¦å³ç•™è¾¹è·
        chart_header_layout.setSpacing(10)

        chart_title = QLabel("ç®¡å­”ç›´å¾„å®æ—¶ç›‘æµ‹")
        chart_title.setObjectName("PanelHeaderText")

        # æ·»åŠ å·¥å…·æŒ‰é’®
        from PySide6.QtWidgets import QToolButton
        export_chart_button = QToolButton()
        export_chart_button.setObjectName("HeaderToolButton")
        if HAS_QTAWESOME:
            export_chart_button.setText(qta.icon('fa5s.chart-bar').char)
        else:
            export_chart_button.setText("ğŸ“Š")  # ä½¿ç”¨emojiä½œä¸ºå›¾æ ‡
        export_chart_button.setToolTip("å¯¼å‡ºå›¾è¡¨ä¸ºå›¾ç‰‡")

        refresh_chart_button = QToolButton()
        refresh_chart_button.setObjectName("HeaderToolButton")
        if HAS_QTAWESOME:
            refresh_chart_button.setText(qta.icon('fa5s.sync-alt').char)
        else:
            refresh_chart_button.setText("ğŸ”„")  # ä½¿ç”¨emojiä½œä¸ºå›¾æ ‡
        refresh_chart_button.setToolTip("åˆ·æ–°å›¾è¡¨")

        chart_header_layout.addWidget(chart_title)
        chart_header_layout.addStretch()
        chart_header_layout.addWidget(refresh_chart_button)
        chart_header_layout.addWidget(export_chart_button)

        # å°†æ ‡é¢˜æ æ·»åŠ åˆ°å¸ƒå±€
        chart_layout.addWidget(chart_header)

        # åˆ›å»ºmatplotlibå›¾å½¢ï¼Œä¼˜åŒ–å°ºå¯¸ä»¥æœ€å¤§åŒ–æ˜¾ç¤ºåŒºåŸŸ
        self.figure = Figure(figsize=(24, 12), dpi=100)
        self.canvas = FigureCanvas(self.figure)
        chart_layout.addWidget(self.canvas)

        # è¿æ¥é¼ æ ‡äº‹ä»¶ç”¨äºç¼©æ”¾å’Œé‡ç½®
        self.canvas.mpl_connect('scroll_event', self.on_scroll)
        self.canvas.mpl_connect('button_press_event', self.on_mouse_press)

        # åˆ›å»ºå­å›¾ - å¢å¤§å­—ä½“
        self.ax = self.figure.add_subplot(111)
        self.apply_matplotlib_dark_theme()  # åº”ç”¨æ·±è‰²ä¸»é¢˜
        self.ax.set_xlabel('æ·±åº¦ (mm)', fontsize=14, fontweight='bold')
        self.ax.set_ylabel('ç›´å¾„ (mm)', fontsize=14, fontweight='bold')
        # ç§»é™¤matplotlibå†…éƒ¨æ ‡é¢˜ï¼Œä½¿ç”¨å¤–éƒ¨æ ‡é¢˜æ 
        # self.ax.set_title('ç®¡å­”ç›´å¾„å®æ—¶ç›‘æµ‹', fontsize=16, fontweight='bold', pad=15)
        self.ax.grid(True, alpha=0.3)
```

## ğŸ”´ å†²çªåŒºåŸŸ3: ç¬¬272-283è¡Œ - matplotlibå›¾è¡¨é…ç½®

### **wsy_2åˆ†æ”¯ç‰ˆæœ¬**
```python
# ç¬¬272-277è¡Œ
        # è®¾ç½®åæ ‡è½´åˆ»åº¦å­—ä½“å¤§å°
        self.ax.tick_params(axis='both', which='major', labelsize=12)
        self.ax.tick_params(axis='both', which='minor', labelsize=10)

        # è®¾ç½®åˆå§‹èŒƒå›´
        self.ax.set_ylim(16.5, 20.5)

# ç¬¬277-283è¡Œ (æ¥ç»­)
=======
        self.ax.set_xlim(0, 950)

        # åˆå§‹åŒ–æ•°æ®çº¿
        self.data_line, = self.ax.plot([], [], 'b-', linewidth=3, label='ç›´å¾„æ•°æ®')

        # è®¾ç½®å›¾å½¢æ ·å¼ï¼Œç¡®ä¿æ‰€æœ‰æ ‡ç­¾éƒ½èƒ½å®Œæ•´æ˜¾ç¤º
        self.figure.subplots_adjust(left=0.12, bottom=0.15, right=0.95, top=0.85)
>>>>>>> origin/main
```

### **mainåˆ†æ”¯ç‰ˆæœ¬**
```python
# ç¬¬272-283è¡Œ
        # è®¾ç½®åæ ‡è½´åˆ»åº¦å­—ä½“å¤§å°
        self.ax.tick_params(axis='both', which='major', labelsize=12)
        self.ax.tick_params(axis='both', which='minor', labelsize=10)

        # è®¾ç½®åˆå§‹èŒƒå›´
        self.ax.set_ylim(16.5, 20.5)
        self.ax.set_xlim(0, 950)

        # åˆå§‹åŒ–æ•°æ®çº¿ - ä½¿ç”¨ä¸»é¢˜è“è‰²
        self.data_line, = self.ax.plot([], [], color='#4A90E2', linewidth=3, label='ç›´å¾„æ•°æ®')

        # è®¾ç½®å›¾å½¢æ ·å¼ï¼Œç¡®ä¿æ‰€æœ‰æ ‡ç­¾éƒ½èƒ½å®Œæ•´æ˜¾ç¤º
        self.figure.subplots_adjust(left=0.12, bottom=0.15, right=0.95, top=0.85)
```

## ğŸ”´ å†²çªåŒºåŸŸ4: ç¬¬338-391è¡Œ - é¢æ¿å¸ƒå±€å®Œæˆå’Œåˆå§‹åŒ–

### **wsy_2åˆ†æ”¯ç‰ˆæœ¬**
```python
# ç¬¬338-389è¡Œ
        # è®¾ç½®å›¾ä¾‹ä½ç½®ï¼Œç¡®ä¿ä¸è¢«é®æŒ¡ - å¢å¤§å­—ä½“
        self.ax.legend(loc='upper right', bbox_to_anchor=(0.95, 0.95), fontsize=12)

        # åœ¨å›¾è¡¨ä¸‹æ–¹æ·»åŠ é¢æ¿Aä¸“ç”¨æ§åˆ¶æŒ‰é’®ï¼ˆç§»é™¤æ ‡å‡†ç›´å¾„è¾“å…¥ï¼‰
        self.create_panel_a_controls(chart_layout)

        panel_a_layout.addWidget(chart_widget)

        # é¢æ¿Aå³ä¾§ï¼šå¼‚å¸¸æ•°æ®æ˜¾ç¤ºåŒºåŸŸå’ŒæŒ‰é’®
        right_panel = QWidget()
        right_panel.setMinimumWidth(320)  # è®¾ç½®æœ€å°å®½åº¦è€Œä¸æ˜¯å›ºå®šå®½åº¦
        right_panel.setMaximumWidth(400)  # è®¾ç½®æœ€å¤§å®½åº¦ï¼Œå…è®¸é€‚åº¦è°ƒæ•´
        right_layout = QVBoxLayout(right_panel)
        right_layout.setContentsMargins(5, 5, 5, 5)  # è®¾ç½®è¾¹è·
        right_layout.setSpacing(8)  # è®¾ç½®ç»„ä»¶é—´è·

        # å¼‚å¸¸ç›‘æ§çª—å£ - ä½¿ç”¨stretch factorå æ®å¤§éƒ¨åˆ†ç©ºé—´
        self.create_anomaly_panel(right_layout)

        # æ·»åŠ å›ºå®šé—´è·ï¼Œç¡®ä¿æŒ‰é’®ä¸ä¼šç´§è´´å¼‚å¸¸é¢æ¿
        right_layout.addSpacing(15)

        # æ·»åŠ ã€æŸ¥çœ‹ä¸‹ä¸€ä¸ªæ ·å“ã€‘æŒ‰é’® - ä½¿ç”¨Material Designç»¿è‰²æ ·å¼
        self.next_sample_button = QPushButton("æŸ¥çœ‹ä¸‹ä¸€ä¸ªæ ·å“")
        self.next_sample_button.clicked.connect(self.view_next_sample)
        self.next_sample_button.setStyleSheet("""
            QPushButton {
                font-weight: bold;
                padding: 10px 16px;
                border: 2px solid #4CAF50;
                border-radius: 8px;
                background-color: #4CAF50;
                color: white;
                min-height: 40px;
            }
            QPushButton:hover {
                background-color: #45a049;
                border-color: #45a049;
            }
            QPushButton:pressed {
                background-color: #3d8b40;
            }
        """)
        from PySide6.QtWidgets import QSizePolicy
        self.next_sample_button.setSizePolicy(
            QSizePolicy.Expanding,
            QSizePolicy.Fixed
        )
        right_layout.addWidget(self.next_sample_button)

        # æ·»åŠ åº•éƒ¨é—´è·ï¼Œç¡®ä¿æŒ‰é’®ä¸ä¼šè´´åº•
        right_layout.addSpacing(10)

        panel_a_layout.addWidget(right_panel)
        splitter.addWidget(panel_a)

        # é¢æ¿B: å†…çª¥é•œå›¾åƒ - æ— è¾¹æ¡†è®¾è®¡ï¼Œç›´æ¥æ·»åŠ å†…çª¥é•œè§†å›¾
        panel_b = QGroupBox("å†…çª¥é•œå®æ—¶å›¾åƒ")
        panel_b.setStyleSheet("""
            QGroupBox {
                font-weight: bold;
                font-size: 16px;
                border: 3px solid #2196F3;
                border-radius: 12px;
                margin-top: 15px;
                padding-top: 15px;
                background-color: #f3f8ff;
            }
            QGroupBox::title {
                subcontrol-origin: margin;
                left: 20px;
                padding: 5px 15px 5px 15px;
                color: #1976D2;
                background-color: white;
                font-size: 16px;
                font-weight: bold;
                border: 2px solid #2196F3;
                border-radius: 8px;
            }
        """)
        panel_b_layout = QVBoxLayout(panel_b)

        # æ·»åŠ å†…çª¥é•œå›¾åƒçš„è¯´æ˜ä¿¡æ¯
        endoscope_info_widget = QWidget()
        endoscope_info_layout = QHBoxLayout(endoscope_info_widget)
        endoscope_info_layout.setContentsMargins(10, 5, 10, 5)
        
        info_label = QLabel("BISDMå†…çª¥é•œå®æ—¶ç›‘æµ‹å›¾åƒ")
        info_label.setStyleSheet("""
            QLabel {
                font-size: 14px;
                font-weight: bold;
                color: #1976D2;
                background-color: #e3f2fd;
                padding: 8px 15px;
                border: 1px solid #2196F3;
                border-radius: 6px;
            }
        """)

# ç¬¬389-391è¡Œ (æ¥ç»­)
=======

        splitter.addWidget(panel_a_widget)
>>>>>>> origin/main
```

### **mainåˆ†æ”¯ç‰ˆæœ¬**
```python
# ç¬¬338-391è¡Œ
        # è®¾ç½®å›¾ä¾‹ä½ç½®ï¼Œç¡®ä¿ä¸è¢«é®æŒ¡ - å¢å¤§å­—ä½“
        self.ax.legend(loc='upper right', bbox_to_anchor=(0.95, 0.95), fontsize=12)

        # åœ¨å›¾è¡¨ä¸‹æ–¹æ·»åŠ é¢æ¿Aä¸“ç”¨æ§åˆ¶æŒ‰é’®ï¼ˆç§»é™¤æ ‡å‡†ç›´å¾„è¾“å…¥ï¼‰
        self.create_panel_a_controls(chart_layout)

        panel_a_layout.addWidget(chart_widget)

        # é¢æ¿Aå³ä¾§ï¼šå¼‚å¸¸æ•°æ®æ˜¾ç¤ºåŒºåŸŸå’ŒæŒ‰é’®
        right_panel = QWidget()
        right_panel.setObjectName("RightPanel")
        right_panel.setMinimumWidth(320)  # è®¾ç½®æœ€å°å®½åº¦è€Œä¸æ˜¯å›ºå®šå®½åº¦
        right_panel.setMaximumWidth(400)  # è®¾ç½®æœ€å¤§å®½åº¦ï¼Œå…è®¸é€‚åº¦è°ƒæ•´
        right_layout = QVBoxLayout(right_panel)
        right_layout.setContentsMargins(5, 5, 5, 5)  # è®¾ç½®è¾¹è·
        right_layout.setSpacing(8)  # è®¾ç½®ç»„ä»¶é—´è·

        # å¼‚å¸¸ç›‘æ§çª—å£ - ä½¿ç”¨stretch factorå æ®å¤§éƒ¨åˆ†ç©ºé—´
        self.create_anomaly_panel(right_layout)

        # æ·»åŠ å›ºå®šé—´è·ï¼Œç¡®ä¿æŒ‰é’®ä¸ä¼šç´§è´´å¼‚å¸¸é¢æ¿
        right_layout.addSpacing(15)

        # æ·»åŠ ã€æŸ¥çœ‹ä¸‹ä¸€ä¸ªæ ·å“ã€‘æŒ‰é’® - ä½¿ç”¨ä¸»é¢˜æ ·å¼
        self.next_sample_button = QPushButton("æŸ¥çœ‹ä¸‹ä¸€ä¸ªæ ·å“")
        self.next_sample_button.clicked.connect(self.view_next_sample)
        self.next_sample_button.setObjectName("next_sample_button")
        from PySide6.QtWidgets import QSizePolicy
        self.next_sample_button.setSizePolicy(
            QSizePolicy.Expanding,
            QSizePolicy.Fixed
        )
        right_layout.addWidget(self.next_sample_button)

        # æ·»åŠ åº•éƒ¨é—´è·ï¼Œç¡®ä¿æŒ‰é’®ä¸ä¼šè´´åº•
        right_layout.addSpacing(10)

        panel_a_layout.addWidget(right_panel)
        splitter.addWidget(panel_a_widget)

        # é¢æ¿B: å†…çª¥é•œå›¾åƒ - æ— è¾¹æ¡†è®¾è®¡ï¼Œç›´æ¥æ·»åŠ å†…çª¥é•œè§†å›¾
        self.endoscope_view = EndoscopeView()
        self.endoscope_view.setObjectName("EndoscopeWidget")
        splitter.addWidget(self.endoscope_view)

        # è®¾ç½®åˆ†å‰²å™¨æ¯”ä¾‹ï¼Œä½¿ç”¨ç›¸å¯¹æ¯”ä¾‹è€Œä¸æ˜¯å›ºå®šåƒç´ 
        # é¢æ¿Aå 65%ï¼Œé¢æ¿Bå 35%
        layout.addWidget(splitter)

        # ä¿å­˜åˆ†å‰²å™¨å¼•ç”¨ï¼Œç”¨äºåç»­è°ƒæ•´
        self.main_splitter = splitter

        # å»¶è¿Ÿè®¾ç½®åˆ†å‰²å™¨æ¯”ä¾‹ï¼Œç¡®ä¿çª—å£å·²å®Œå…¨åˆå§‹åŒ–
        from PySide6.QtCore import QTimer
        QTimer.singleShot(100, lambda: self.safe_adjust_splitter_sizes(splitter))

        # åˆå§‹åŒ–å­”ä½æ•°æ®æ˜ å°„
        self.init_hole_data_mapping()

        # è¿æ¥æŒ‰é’®ä¿¡å·ï¼ˆæŒ‰é’®å·²åœ¨çŠ¶æ€æ ä¸­åˆ›å»ºï¼‰
        self.start_button.clicked.connect(self.start_csv_data_import)
        self.stop_button.clicked.connect(self.stop_csv_data_import)
        self.clear_button.clicked.connect(self.clear_data)

        # åˆå§‹çŠ¶æ€ä¸‹ç¦ç”¨æŒ‰é’®ï¼Œç­‰å¾…ä»ä¸»æ£€æµ‹ç•Œé¢è·³è½¬
        self.start_button.setEnabled(False)
        self.stop_button.setEnabled(False)
        self.clear_button.setEnabled(False)

        # è®¾ç½®æŒ‰é’®æç¤º
        self.start_button.setToolTip("è¯·å…ˆä»ä¸»æ£€æµ‹ç•Œé¢é€‰æ‹©å­”ä½")
        self.stop_button.setToolTip("è¯·å…ˆä»ä¸»æ£€æµ‹ç•Œé¢é€‰æ‹©å­”ä½")
        self.clear_button.setToolTip("è¯·å…ˆä»ä¸»æ£€æµ‹ç•Œé¢é€‰æ‹©å­”ä½")

        # è®¾ç½®ç­‰å¾…çŠ¶æ€
        self.setup_waiting_state()
```

---

## ğŸ“Š **å†²çªåˆ†ææ€»ç»“**

### **æ ¸å¿ƒå·®å¼‚ç‚¹**

1. **ğŸ¨ è®¾è®¡é£æ ¼å®Œå…¨ä¸åŒ**:
   - **wsy_2**: Material Designé£æ ¼ï¼Œç»¿è‰²(`#4CAF50`)å’Œè“è‰²(`#2196F3`)é…è‰²
   - **main**: ç°ä»£ç§‘æŠ€è“ä¸»é¢˜ï¼Œä½¿ç”¨ObjectName + ä¸»é¢˜ç®¡ç†å™¨

2. **ğŸ—ï¸ æ¶æ„æ–¹å¼æ ¹æœ¬ä¸åŒ**:
   - **wsy_2**: å¤§é‡å†…è”CSSæ ·å¼ï¼ŒQGroupBox + è£…é¥°æ€§è¾¹æ¡†
   - **main**: ObjectNameé€‰æ‹©å™¨ + ç»Ÿä¸€ä¸»é¢˜ç®¡ç†ï¼Œæ— è¾¹æ¡†ç®€æ´è®¾è®¡

3. **ğŸ”§ åŠŸèƒ½å®ç°å·®å¼‚**:
   - **wsy_2**: åŒé¢æ¿(A+B)è®¾è®¡ï¼ŒåŒ…å«å†…çª¥é•œé¢æ¿
   - **main**: ç®€åŒ–çš„å•ä¸€å†…å®¹åŒº + çŠ¶æ€ä»ªè¡¨ç›˜é›†æˆ

4. **ğŸ¯ æŒ‰é’®å’Œæ§åˆ¶å…ƒç´ **:
   - **wsy_2**: æ§åˆ¶æŒ‰é’®åˆ†æ•£åœ¨ä¸åŒä½ç½®ï¼ŒMaterial Designæ ·å¼
   - **main**: æ§åˆ¶æŒ‰é’®é›†æˆåœ¨çŠ¶æ€æ ï¼Œä½¿ç”¨emojiå›¾æ ‡

5. **ğŸ“ˆ matplotlibé›†æˆ**:
   - **wsy_2**: è£…é¥°æ€§æ ‡é¢˜æ¡†ï¼Œç»¿è‰²ä¸»é¢˜
   - **main**: æ·±è‰²ä¸»é¢˜ï¼Œå¤–éƒ¨æ ‡é¢˜æ ï¼Œè“è‰²æ•°æ®çº¿

### **è§£å†³å»ºè®®**

è¿™æ˜¯ä¸¤å¥—å®Œå…¨ä¸åŒçš„è®¾è®¡ç³»ç»Ÿå†²çªï¼Œéœ€è¦åšå‡ºæ¶æ„æ€§å†³ç­–ï¼š

1. **é€‰æ‹©è®¾è®¡ç³»ç»Ÿ**: Material Design(wsy_2) vs ç°ä»£ç§‘æŠ€è“(main)
2. **é€‰æ‹©æ¶æ„æ–¹å¼**: å†…è”æ ·å¼ vs ä¸»é¢˜ç®¡ç†å™¨
3. **åŠŸèƒ½æ•´åˆ**: å†³å®šä¿ç•™å“ªäº›UIå…ƒç´ å’ŒåŠŸèƒ½ç‰¹æ€§
4. **æµ‹è¯•éªŒè¯**: ç¡®ä¿é€‰æ‹©çš„æ–¹æ¡ˆåœ¨æ•´ä¸ªç³»ç»Ÿä¸­ä¿æŒä¸€è‡´

**å»ºè®®**: é‡‡ç”¨mainåˆ†æ”¯çš„æ¶æ„(ä¸»é¢˜ç®¡ç†å™¨)ï¼Œä½†å¯ä»¥è€ƒè™‘è°ƒæ•´é…è‰²æ–¹æ¡ˆä»¥ä¿æŒé¡¹ç›®æ•´ä½“é£æ ¼ä¸€è‡´ã€‚