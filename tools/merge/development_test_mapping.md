# AIDCIS2 组件整合开发与测试映射关系

**项目**: AIDCIS2组件整合开发与测试映射  
**目标**: 建立开发任务与测试任务之间的清晰对应关系  
**创建时间**: 2025-07-07  

## 映射概述

本文档建立integration_checklist.md中的最小开发单元(SDU)与unit_tests.md、integration_tests.md、system_tests.md中测试用例的映射关系，确保每个开发任务都有对应的测试验证。

## 第一阶段：环境准备与依赖管理

| 开发顺序 | 最小开发单元 | 单元测试 | 集成测试 | 系统测试 | 优先级 |
|---------|-------------|---------|---------|---------|--------|
| 1 | SDU-001: 依赖项分析与合并 | - | IT-010: 依赖冲突处理 | ST-001: 依赖加载测试 | P0 |
| 2 | SDU-002: 新依赖项安装 | - | IT-010: 依赖冲突处理 | ST-001: 依赖加载测试 | P0 |
| 3 | SDU-003: 目录结构调整 | - | IT-001: 主窗口组件加载 | ST-001: 应用启动测试 | P1 |

**测试策略**: 
- 重点验证依赖兼容性和版本冲突处理
- 确保新目录结构不影响现有功能
- 验证Python路径配置正确

## 第二阶段：核心组件移植

| 开发顺序 | 最小开发单元 | 单元测试 | 集成测试 | 系统测试 | 优先级 |
|---------|-------------|---------|---------|---------|--------|
| 4 | SDU-004: DXF解析器集成 | UT-001: DXF文件解析基础功能<br>UT-002: 孔位数据提取<br>UT-003: HoleCollection生成 | IT-005: 数据库集成测试 | ST-003: DXF文件加载工作流 | P0 |
| 5 | SDU-005: 数据模型整合 | UT-004: HoleData模型测试<br>UT-005: StatusManager测试<br>UT-006: 数据转换适配器测试 | IT-005: 数据库集成测试<br>IT-006: 配置数据集成 | ST-008: 数据一致性测试 | P0 |
| 6 | SDU-006: 图形组件移植 | UT-007: OptimizedGraphicsView测试<br>UT-008: HoleGraphicsItem测试 | IT-009: 大数据量集成测试 | ST-007: 界面响应性测试 | P1 |
| 7 | SDU-007: 搜索引擎集成 | UT-009: SearchEngine核心功能测试<br>UT-010: 搜索性能测试 | IT-008: 搜索功能集成测试 | ST-006: 搜索功能测试 | P1 |

**测试策略**:
- DXF解析器是核心功能，需要全面的单元测试覆盖
- 数据模型整合涉及数据一致性，重点测试转换逻辑
- 图形组件重点测试性能和内存管理
- 搜索引擎测试覆盖功能性和性能

## 第三阶段：主界面替换

| 开发顺序 | 最小开发单元 | 单元测试 | 集成测试 | 系统测试 | 优先级 |
|---------|-------------|---------|---------|---------|--------|
| 8 | SDU-008: 新主界面组件准备 | - | IT-001: 主窗口组件加载集成 | ST-001: 应用启动测试 | P0 |
| 9 | SDU-009: UI组件移植 | - | IT-001: 主窗口组件加载集成<br>IT-002: 菜单栏和工具栏集成 | ST-006: 界面导航测试 | P0 |
| 10 | SDU-010: 主窗口导入路径修改 | - | IT-001: 主窗口组件加载集成 | ST-001: 应用启动测试<br>ST-006: 界面导航测试 | P0 |

**测试策略**:
- 主界面替换是关键变更，需要重点测试集成效果
- 验证新界面与现有菜单系统的兼容性
- 确保导入路径修改不影响其他模块

## 第四阶段：信号槽连接

| 开发顺序 | 最小开发单元 | 单元测试 | 集成测试 | 系统测试 | 优先级 |
|---------|-------------|---------|---------|---------|--------|
| 11 | SDU-011: 导航信号适配 | - | IT-003: 导航信号集成测试 | ST-004: 孔位检测工作流<br>ST-005: 历史数据查看工作流 | P0 |
| 12 | SDU-012: 信号连接更新 | - | IT-003: 导航信号集成测试<br>IT-004: 状态同步信号集成 | ST-004: 孔位检测工作流 | P0 |
| 13 | SDU-013: 数据传递接口 | UT-006: 数据转换适配器测试 | IT-004: 状态同步信号集成<br>IT-005: 数据库集成测试 | ST-008: 数据一致性测试 | P0 |

**测试策略**:
- 信号槽连接是组件间通信的关键，需要100%验证
- 重点测试导航信号的正确传递和响应
- 验证数据传递接口的准确性和性能

## 第五阶段：配置与日志系统

| 开发顺序 | 最小开发单元 | 单元测试 | 集成测试 | 系统测试 | 优先级 |
|---------|-------------|---------|---------|---------|--------|
| 14 | SDU-014: 配置管理集成 | UT-011: ConfigManager测试<br>UT-012: 配置合并测试 | IT-006: 配置数据集成 | ST-011: 配置恢复测试 | P1 |
| 15 | SDU-015: 日志系统集成 | UT-013: LogManager测试 | - | ST-010: 异常情况处理测试 | P2 |
| 16 | SDU-016: 性能监控集成 | UT-014: PerformanceMonitor测试 | IT-009: 大数据量集成测试 | ST-007: 界面响应性测试 | P2 |

**测试策略**:
- 配置管理重点测试合并策略和冲突解决
- 日志系统测试异步处理和性能影响
- 性能监控验证资源使用和告警机制

## 第六阶段：功能验证与优化

| 开发顺序 | 最小开发单元 | 单元测试 | 集成测试 | 系统测试 | 优先级 |
|---------|-------------|---------|---------|---------|--------|
| 17 | SDU-017: DXF文件加载测试 | UT-001: DXF文件解析基础功能 | IT-009: 大数据量集成测试 | ST-003: DXF文件加载工作流 | P0 |
| 18 | SDU-018: 界面响应性测试 | UT-007: OptimizedGraphicsView测试 | IT-007: 跨模块UI交互测试 | ST-007: 界面响应性测试 | P1 |
| 19 | SDU-019: 导航功能验证 | - | IT-003: 导航信号集成测试 | ST-004: 孔位检测工作流<br>ST-005: 历史数据查看工作流 | P0 |
| 20 | SDU-020: 数据同步验证 | UT-005: StatusManager测试 | IT-004: 状态同步信号集成<br>IT-005: 数据库集成测试 | ST-008: 数据一致性测试 | P0 |

**测试策略**:
- 功能验证阶段重点进行端到端测试
- 验证所有集成组件协同工作的效果
- 确保用户工作流的完整性和流畅性

## 第七阶段：清理与优化

| 开发顺序 | 最小开发单元 | 单元测试 | 集成测试 | 系统测试 | 优先级 |
|---------|-------------|---------|---------|---------|--------|
| 21 | SDU-021: 旧代码清理 | - | IT-011: 版本兼容性测试 | ST-001: 应用启动测试 | P2 |
| 22 | SDU-022: 文档更新 | - | - | - | P2 |
| 23 | SDU-023: 最终验证 | 所有单元测试 | 所有集成测试 | 所有系统测试 | P0 |

**测试策略**:
- 清理阶段确保移除的代码不影响系统稳定性
- 最终验证执行完整的测试套件
- 确保文档与实际实现保持一致

## 测试执行优先级矩阵

### P0 (关键) - 必须通过的测试
| 阶段 | SDU | 关键测试用例 | 通过标准 |
|------|-----|-------------|---------|
| 1-2 | SDU-001, SDU-002 | IT-010, ST-001 | 依赖加载100%成功 |
| 2 | SDU-004, SDU-005 | UT-001~006, IT-005, ST-003, ST-008 | 数据解析和转换100%正确 |
| 3 | SDU-008~010 | IT-001, ST-001, ST-006 | 界面加载100%成功 |
| 4 | SDU-011~013 | IT-003, IT-004, ST-004, ST-008 | 信号槽连接100%正确 |
| 6 | SDU-017, SDU-019, SDU-020 | ST-003, ST-004, ST-008 | 核心工作流100%通过 |
| 7 | SDU-023 | 全部测试 | 整体测试通过率≥95% |

### P1 (重要) - 影响用户体验的测试
| 阶段 | SDU | 重要测试用例 | 通过标准 |
|------|-----|-------------|---------|
| 2 | SDU-006, SDU-007 | UT-007~010, IT-008, ST-007 | 性能满足要求 |
| 5 | SDU-014 | UT-011, UT-012, IT-006 | 配置管理正常 |
| 6 | SDU-018 | UT-007, IT-007, ST-007 | 界面响应性良好 |

### P2 (一般) - 辅助功能测试
| 阶段 | SDU | 一般测试用例 | 通过标准 |
|------|-----|-------------|---------|
| 5 | SDU-015, SDU-016 | UT-013, UT-014 | 功能正常工作 |
| 7 | SDU-021, SDU-022 | IT-011 | 兼容性良好 |

## 测试覆盖率要求

### 代码覆盖率目标
| 组件类型 | 单元测试覆盖率 | 集成测试覆盖率 | 系统测试覆盖率 |
|---------|---------------|---------------|---------------|
| DXF解析器 | ≥90% | ≥85% | ≥80% |
| 数据模型 | ≥85% | ≥80% | ≥75% |
| 图形组件 | ≥80% | ≥75% | ≥70% |
| 搜索引擎 | ≥85% | ≥80% | ≥75% |
| 配置管理 | ≥80% | ≥75% | ≥70% |
| 信号槽连接 | ≥95% | ≥90% | ≥85% |

### 功能覆盖率目标
| 功能类别 | 覆盖率要求 | 关键测试用例 |
|---------|-----------|-------------|
| 核心工作流 | 100% | ST-003, ST-004, ST-005 |
| 用户交互 | ≥95% | ST-006, ST-007 |
| 数据处理 | 100% | UT-001~006, IT-005, ST-008 |
| 异常处理 | ≥90% | IT-010, ST-010, ST-011 |

## 测试执行时间表

### 并行测试策略
```
阶段1-2 (第1-2周):
├── 单元测试: 无
├── 集成测试: IT-010 (依赖测试)
└── 系统测试: ST-001 (启动测试)

阶段2 (第3-4周):
├── 单元测试: UT-001~006 (并行执行)
├── 集成测试: IT-005 (数据库集成)
└── 系统测试: ST-003, ST-008 (DXF和数据测试)

阶段3 (第5周):
├── 单元测试: 无
├── 集成测试: IT-001, IT-002 (界面集成)
└── 系统测试: ST-006 (界面导航)

阶段4 (第6周):
├── 单元测试: UT-006 (数据适配器)
├── 集成测试: IT-003, IT-004 (信号槽)
└── 系统测试: ST-004, ST-005 (工作流)

阶段5 (第7周):
├── 单元测试: UT-011~014 (配置和日志)
├── 集成测试: IT-006 (配置集成)
└── 系统测试: ST-007, ST-010, ST-011

阶段6-7 (第8-9周):
├── 单元测试: 回归测试
├── 集成测试: 完整集成测试
└── 系统测试: 完整系统测试
```

## 测试完成标准

### 阶段性完成标准
- **阶段1-2**: 依赖和环境测试100%通过
- **阶段2**: 核心组件单元测试≥90%通过
- **阶段3**: 界面集成测试100%通过
- **阶段4**: 信号槽集成测试100%通过
- **阶段5**: 配置和日志测试≥85%通过
- **阶段6-7**: 所有测试≥95%通过

### 最终完成标准
- [ ] 所有P0测试用例100%通过
- [ ] 所有P1测试用例≥95%通过
- [ ] 所有P2测试用例≥85%通过
- [ ] 代码覆盖率达到目标要求
- [ ] 性能指标满足用户需求
- [ ] 用户验收测试通过

**项目成功标准**: 完成所有23个SDU的开发和测试，整体测试通过率≥95%，用户满意度≥90%。
