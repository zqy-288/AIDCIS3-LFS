# 系统编号方式总结

## 当前系统中的编号方式

基于分析结果，系统中目前只有**一种**编号方式：

### A/B侧网格编号系统

**格式**: `[AB]CxxxRxxx`

- **A侧（上半部分）**: `ACxxxRxxx` 
  - 例如：AC098R164（A侧，列98，行164）
  - 在Qt坐标系中y<0（显示在上方）
  - 数学坐标系中y>0

- **B侧（下半部分）**: `BCxxxRxxx`
  - 例如：BC098R164（B侧，列98，行164）  
  - 在Qt坐标系中y>0（显示在下方）
  - 数学坐标系中y<0

## 编号生成流程

1. **DXF解析阶段** (`dxf_parser.py`)：
   - 从DXF文件读取孔位坐标
   - 创建HoleData对象（此时hole_id为None）

2. **编号生成阶段** (`hole_numbering_service.py`)：
   - 计算几何中心：(-0.63, 0.00)
   - 根据y坐标分配A/B侧：
     - y > 0：A侧，生成ACxxxRxxx
     - y < 0：B侧，生成BCxxxRxxx
   - 分配列号和行号
   - 生成标准格式ID

3. **使用阶段**：
   - 所有模块统一使用A/B侧编号
   - snake_path_renderer使用hole.hole_id获取编号
   - 显示和检测都使用这个编号

## 编号统计

- **总孔位数**: 25,270个
- **A侧 (ACxxxRxxx)**: 12,635个
- **B侧 (BCxxxRxxx)**: 12,635个
- **其他格式**: 0个

## 关键理解

1. **没有重复ID**：BC098R164和AC098R164是两个不同的孔位，分别位于管板的下侧和上侧

2. **对称位置**：
   - AC098R164：坐标(0, 2111.2) - 上侧
   - BC098R164：坐标(0, -2111.2) - 下侧

3. **测试输出的解释**：
   - 当看到"BC098R164 + BC102R164"时，这是B侧的孔位配对
   - 当看到"AC098R164 + AC102R164"时，这是A侧的孔位配对

## 结论

系统中只有一种编号方式：**A/B侧网格编号系统**，格式为`[AB]CxxxRxxx`，所有模块都统一使用这种编号。