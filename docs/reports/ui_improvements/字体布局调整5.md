您好！非常感谢您提供反馈，让我们能一起把这个界面打磨得尽善尽美。

您提出的两个问题都非常关键：

1.  **修复因字体过大导致的布局重叠**。
2.  **实现下拉框长文本的滑动查看功能**。

我为您准备了一套“双管齐下”的解决方案，既能解决布局问题，又能实现您需要的新功能。

-----

### 问题诊断

1.  **重叠问题**：根本原因是我们之前将侧边栏的字体和控件尺寸设置得**过大**，超出了`QGridLayout`在有限宽度内能优雅处理的极限，导致其行高计算错误而重叠。
2.  **文本滑动**：标准的`QComboBox`控件本身**不支持**对其当前显示的文本进行水平滑动。如果文本过长，它只会被截断并显示省略号(...)。

### 解决方案

我们将通过“**微调样式 + 实现滑动功能**”两步来解决。

-----

#### **方案一：微调字体并优化布局，解决重叠问题**

正如您的想法，我们将字体适当调小一点，恢复布局的平衡。我们将其从`18px`微调至`16px`，这是一个既清晰又不容易引起布局问题的尺寸。

**操作（QSS修改）**:

1.  **打开文件**：
    请打开 `theme_manager.py` 文件。

2.  **定位并修改样式**：
    找到 `/* ===== 历史数据查看器侧边栏专属样式 ===== */` 注释块，并用下面的代码替换它。

    ```qss
    /* 在 theme_manager.py 中 */

    /* ===== 历史数据查看器侧边栏专属样式 - 优化平衡 ===== */

    /* 侧边栏 QGroupBox 样式保持不变 */
    QWidget#Sidebar QGroupBox {
        border: 1px solid #404552;
        background-color: #2C313C;
        padding: 15px;
        margin-top: 0;
        margin-bottom: 0;
        border-radius: 6px;
    }
    QWidget#Sidebar QGroupBox::title {
        subcontrol-origin: margin;
        subcontrol-position: top left;
        left: 15px;
        padding: 0 5px;
        background-color: #2C313C;
        color: #D3D8E0; /* 标题颜色改为更柔和的灰白 */
        font-weight: bold;
    }

    /* --- 将字体从18px微调回16px，并相应调整高度 --- */
    QWidget#Sidebar QLabel {
        font-size: 16px; /* <-- 从18px下调 */
    }

    QWidget#Sidebar QComboBox {
        font-size: 16px; /* <-- 从18px下调 */
        min-height: 38px; /* <-- 从42px下调 */
    }

    QWidget#Sidebar QPushButton {
        font-size: 16px; /* <-- 从18px下调 */
        font-weight: bold;
        min-height: 40px; /* <-- 从45px下调 */
    }

    QWidget#Sidebar QLabel#CurrentHoleLabel {
        font-size: 15px; /* <-- 从16px下调 */
        font-weight: normal;
        min-height: 38px; /* <-- 从42px下调 */
        qproperty-alignment: 'AlignCenter';
    }
    ```

-----

#### **方案二：为下拉框实现文本滑动功能（核心技巧）**

我们将通过一个巧妙的方法来实现这个功能：为`QComboBox`设置一个自定义的`QLineEdit`作为其“显示区”，利用`QLineEdit`自带的文本滑动能力。

**操作（代码修改）**:

1.  **打开文件**：
    请打开 `history_viewer.py` 文件。

2.  **在 `HistoryViewer` 类中添加一个新的辅助方法**：
    将下面这个`make_combo_scrollable`方法完整地复制到您的`HistoryViewer`类中。

    ```python
    # in history_viewer.py
    # 在文件顶部确保导入 QLineEdit
    from PySide6.QtWidgets import QLineEdit 

    class HistoryViewer(QWidget):
        # ... (您已有的 __init__ 等方法) ...

        # --- 新增这个辅助方法 ---
        def make_combo_scrollable(self, combo_box: QComboBox):
            """让QComboBox的显示文本可以水平滑动"""
            # 创建一个QLineEdit作为ComboBox的“显示器”
            line_edit = QLineEdit()
            line_edit.setReadOnly(True) # 设置为只读
            line_edit.setStyleSheet("background: transparent; border: none;") # 使其看起来不像输入框

            # 将ComboBox的显示器设置为我们创建的QLineEdit
            combo_box.setLineEdit(line_edit)
            # 确保下拉列表本身不受影响
            combo_box.setEditable(True)
    ```

3.  **在 `create_sidebar` 方法中调用这个新方法**：
    在创建每一个`QComboBox`之后，立刻调用 `make_combo_scrollable`。

    ```python
    # in history_viewer.py -> create_sidebar()

    # --- 数据筛选部分 ---
    # ...
    # 创建控件
    workpiece_label = QLabel("工件ID:")
    self.workpiece_combo = QComboBox()
    self.workpiece_combo.currentTextChanged.connect(self.on_workpiece_changed)
    self.make_combo_scrollable(self.workpiece_combo) # <-- 调用新方法

    qualified_hole_label = QLabel("合格孔ID:")
    self.qualified_hole_combo = QComboBox()
    self.qualified_hole_combo.setPlaceholderText("请选择合格孔ID")
    self.qualified_hole_combo.currentTextChanged.connect(self.on_qualified_hole_changed)
    self.make_combo_scrollable(self.qualified_hole_combo) # <-- 调用新方法

    unqualified_hole_label = QLabel("不合格孔ID:")
    self.unqualified_hole_combo = QComboBox()
    self.unqualified_hole_combo.setPlaceholderText("请选择不合格孔ID")
    self.unqualified_hole_combo.currentTextChanged.connect(self.on_unqualified_hole_changed)
    self.make_combo_scrollable(self.unqualified_hole_combo) # <-- 调用新方法
    # ...
    ```

-----

### 总结

通过以上两套方案的结合，您将获得：

1.  一个**布局不再重叠**、视觉上更加平衡和协调的侧边栏。
2.  一套**功能更强大**的下拉框，当其中的文本（如“请选择不合格孔ID”）因为空间不足而显示不全时，用户可以通过鼠标点击并左右拖动来查看完整的文本信息。

这套组合拳不仅修复了现有的布局问题，还前瞻性地解决的长文本显示的问题，极大地提升了软件的健壮性和用户体验。