# AIDCIS3 系统操作流程指南

## 完整操作流程：从产品型号选择到主检测视图展示

### 概述
本指南详细说明了在AIDCIS3系统中从产品型号选择开始，通过DXF文件建立产品信息，最终展示主检测视图的完整操作流程。

---

## 第一步：启动系统并进入主检测视图

1. **启动应用程序**
   ```bash
   cd /Users/vsiyo/Desktop/AIDCIS3-1/AIDCIS3-LFS
   python run_project.py
   ```

2. **系统启动后的界面**
   - 系统会自动显示主窗口
   - **注意**：当前版本会自动加载默认DXF数据（25210个孔位）
   - 界面包含多个选项卡：主检测视图、产品管理、报告管理等
   - **理想状态**：主检测视图应该是空白的，等待用户选择产品后再加载数据

---

## 第二步：点击产品型号选择

### 2.1 位置和操作
1. **在主检测视图界面中**，找到左上角工具栏
2. **点击"产品型号选择"按钮**
   - 按钮位置：主工具栏左侧
   - 按钮文字：产品型号选择
   - 按钮大小：140x45像素

### 2.2 产品型号选择对话框
点击后会弹出"产品型号选择"对话框，包含：

**界面元素：**
- **标题**：选择产品型号
- **产品列表表格**：显示所有可用产品
  - 列：产品型号、产品编号、孔数、标准直径、状态
- **产品详情面板**：显示选中产品的详细信息
- **操作按钮**：
  - 产品信息维护：打开产品管理界面
  - 刷新列表：刷新产品列表
  - 选择该产品：选择当前产品（需先选中一个产品）
  - 取消：关闭对话框

---

## 第三步：添加新产品（通过DXF文件）

### 3.1 点击"产品信息维护"按钮
1. **在产品型号选择对话框中**
2. **点击"产品信息维护"按钮**
   - 位置：对话框底部按钮栏左侧

### 3.2 产品信息维护对话框
点击后会打开"产品信息维护"对话框：

**界面布局：**
- **左侧**：产品列表表格
- **右侧**：产品详情编辑区域
- **底部**：操作按钮区域

**操作按钮（左侧产品列表上方）：**
- 新增产品：手动创建新产品
- 从DXF导入：从DXF文件创建产品

**表格操作列按钮：**
- 编辑：编辑该产品信息
- 删除：删除该产品

---

## 第四步：从DXF文件导入产品

### 4.1 点击"从DXF导入"按钮
1. **在产品信息维护对话框中**
2. **点击"从DXF导入"按钮**
   - 位置：左侧产品列表上方，"新增产品"按钮旁边

### 4.2 选择DXF文件
1. **文件选择对话框**会弹出
2. **浏览并选择DXF文件**
   - 支持的格式：.dxf文件
   - 系统会自动解析文件内容

### 4.3 DXF导入对话框
选择文件后会显示"DXF文件导入"对话框：

**显示内容：**
- **文件信息**：
  - 文件路径
  - 文件大小
  - 检测到的孔数量
- **分析结果**：
  - 建议的产品型号名称
  - 标准直径
  - 公差估计
  - 布局信息

**编辑字段：**
- **产品型号**：可编辑（基于文件名自动填充）
- **产品编号**：可编辑（自动生成）
- **标准直径**：可编辑（从DXF分析得出）
- **公差范围**：可编辑（默认±0.05）
- **产品描述**：可编辑

**操作按钮：**
- **导入**：创建产品并导入
- **取消**：取消导入

---

## 第五步：确认导入并建立产品信息

### 5.1 验证信息
1. **检查自动填充的信息**：
   - 产品型号名称是否合适
   - 标准直径是否正确
   - 公差范围是否合理

2. **手动调整信息**（如需要）：
   - 修改产品型号名称
   - 调整标准直径
   - 设置合适的公差范围
   - 添加产品描述

### 5.2 点击"导入"按钮
1. **确认信息无误后**
2. **点击"导入"按钮**
   - 系统会创建新的产品记录
   - 保存DXF文件关联信息
   - 建立孔位数据映射

### 5.3 导入成功确认
- 系统会显示"产品创建成功"消息
- 新产品会出现在产品信息维护对话框的产品列表中
- DXF导入对话框关闭，返回产品信息维护对话框

---

## 第六步：选择新建的产品

### 6.1 关闭产品信息维护对话框
1. **在产品信息维护对话框中**
2. **点击右下角的"关闭"按钮**或点击右上角的X
3. **返回到产品型号选择对话框**
4. **新创建的产品**会出现在产品列表中（可能需要点击"刷新列表"）

### 6.2 选择产品
1. **在产品列表中找到新建的产品**
2. **点击选中该产品**
   - 产品详情面板会显示产品信息
   - "选择"按钮变为可用状态

### 6.3 确认选择
1. **点击"选择该产品"按钮**
   - 按钮位置：对话框底部右侧
   - 系统会加载该产品的信息
   - 对话框关闭

---

## 第七步：展示主检测视图

### 7.1 自动加载产品数据
选择产品后，系统会：
1. **加载产品的DXF数据**
2. **初始化检测环境**
3. **更新界面显示**

### 7.2 主检测视图界面元素

**左侧面板：**
- **扇形区域进度**：显示4个扇形区域的检测进度
- **实时状态统计**：合格率、异常率等统计信息

**中央区域：**
- **DXF图形显示**：显示管板和孔位
- **孔位状态**：不同颜色表示不同检测状态
- **交互功能**：可点击、缩放、平移

**右侧面板：**
- **工具栏**：各种检测和操作工具
- **参数设置**：检测参数调整
- **日志显示**：系统操作日志

**底部状态栏：**
- **整体进度**：显示总体检测进度
- **状态信息**：当前操作状态

### 7.3 可用功能
此时可以使用的功能包括：
- **模拟检测进度**：点击"使用模拟进度"按钮
- **扇形区域点击**：点击扇形区域查看详细信息
- **孔位交互**：点击孔位查看详细状态
- **搜索功能**：搜索特定孔位
- **报告生成**：生成检测报告

---

## 操作要点总结

### 关键步骤顺序
1. **启动系统** → 主检测视图（当前会自动加载默认数据）
2. **点击"产品型号选择"** → 产品型号选择对话框
3. **点击"产品信息维护"** → 产品信息维护对话框
4. **点击"从DXF导入"** → 文件选择对话框
5. **选择DXF文件** → DXF导入对话框
6. **确认信息并点击"导入"** → 创建产品
7. **关闭产品信息维护对话框** → 返回产品型号选择对话框
8. **选择新建产品并点击"选择该产品"** → 返回主检测视图
9. **系统自动加载数据** → 显示完整检测界面

### 注意事项
- **DXF文件格式**：确保DXF文件包含有效的圆形实体（孔位）
- **文件路径**：避免中文路径，建议使用英文路径
- **产品名称**：建议使用有意义的产品名称便于管理
- **公差设置**：根据实际检测需求设置合理的公差范围

### 故障排除
- **如果DXF解析失败**：检查DXF文件格式和内容
- **如果产品创建失败**：检查必填字段是否完整
- **如果界面显示异常**：重启应用程序重新操作

---

## 相关文件说明

### 核心模块文件
- `src/modules/product_selection.py`：产品型号选择对话框
- `src/modules/product_management.py`：产品管理对话框
- `src/modules/dxf_import.py`：DXF文件导入功能
- `src/aidcis2/dxf_parser.py`：DXF文件解析器
- `src/main_window.py`：主窗口和检测视图

### 数据存储
- 产品信息存储在SQLite数据库中
- DXF文件路径和解析结果关联存储
- 检测历史和进度数据实时更新

---

## 界面差异说明

### 文档与实际界面的差异
1. **按钮名称**：
   - 文档描述：添加产品
   - 实际界面：产品信息维护

2. **产品管理入口**：
   - 产品型号选择对话框 → 产品信息维护按钮 → 产品信息维护对话框
   - 在产品信息维护对话框中进行产品的新增、编辑、删除和DXF导入

3. **初始界面状态**：
   - 当前：系统启动时自动加载默认DXF数据
   - 期望：主检测视图初始为空白，选择产品后才加载数据

---

*本文档版本：v1.1*  
*更新日期：2025-07-12*  
*适用系统：AIDCIS3-LFS v3.0*