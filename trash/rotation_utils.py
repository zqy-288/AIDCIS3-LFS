"""
å…¨å±€æ—‹è½¬æ§åˆ¶å·¥å…·å‡½æ•°
æä¾›ä¾¿æ·çš„æ—‹è½¬æ§åˆ¶æ¥å£
"""

from typing import Dict, Any
from src.core_business.graphics.rotation_config import get_rotation_manager


# å·²ç¦ç”¨æ‰€æœ‰æ—‹è½¬åŠŸèƒ½
def set_global_rotation_enabled(enabled: bool):
    """
    å…¨å±€å¯ç”¨/ç¦ç”¨æ‰€æœ‰æ—‹è½¬åŠŸèƒ½ - å·²ç¦ç”¨ï¼Œæ— æ•ˆæ“ä½œ
    
    Args:
        enabled: æ˜¯å¦å¯ç”¨æ—‹è½¬ - å¿½ç•¥ï¼ŒåŠŸèƒ½å·²ç¦ç”¨
    """
    # æ—‹è½¬åŠŸèƒ½å·²å…¨å±€ç¦ç”¨ï¼Œä¸æ‰§è¡Œä»»ä½•æ“ä½œ
    print(f"ğŸ”„ [å…¨å±€æ—‹è½¬æ§åˆ¶] æ—‹è½¬åŠŸèƒ½å·²å…¨å±€ç¦ç”¨ï¼Œæ“ä½œæ— æ•ˆ")


# å·²ç¦ç”¨æ‰€æœ‰æ—‹è½¬åŠŸèƒ½
def set_rotation_angle(angle: float, direction: str = "clockwise"):
    """
    è®¾ç½®å…¨å±€æ—‹è½¬è§’åº¦å’Œæ–¹å‘ - å·²ç¦ç”¨ï¼Œæ— æ•ˆæ“ä½œ
    
    Args:
        angle: æ—‹è½¬è§’åº¦ï¼ˆåº¦ï¼‰ - å¿½ç•¥ï¼ŒåŠŸèƒ½å·²ç¦ç”¨
        direction: æ—‹è½¬æ–¹å‘ - å¿½ç•¥ï¼ŒåŠŸèƒ½å·²ç¦ç”¨
    """
    # æ—‹è½¬åŠŸèƒ½å·²å…¨å±€ç¦ç”¨ï¼Œä¸æ‰§è¡Œä»»ä½•æ“ä½œ
    print(f"ğŸ”„ [å…¨å±€æ—‹è½¬æ§åˆ¶] æ—‹è½¬åŠŸèƒ½å·²å…¨å±€ç¦ç”¨ï¼Œè§’åº¦è®¾ç½®æ— æ•ˆ: {angle}Â°")


# å·²ç¦ç”¨æ‰€æœ‰æ—‹è½¬åŠŸèƒ½
def toggle_component_rotation(component: str, enabled: bool = None):
    """
    åˆ‡æ¢æŒ‡å®šç»„ä»¶çš„æ—‹è½¬åŠŸèƒ½ - å·²ç¦ç”¨ï¼Œæ— æ•ˆæ“ä½œ
    
    Args:
        component: ç»„ä»¶åç§° - å¿½ç•¥ï¼ŒåŠŸèƒ½å·²ç¦ç”¨
        enabled: æ˜¯å¦å¯ç”¨ - å¿½ç•¥ï¼ŒåŠŸèƒ½å·²ç¦ç”¨
    """
    # æ—‹è½¬åŠŸèƒ½å·²å…¨å±€ç¦ç”¨ï¼Œä¸æ‰§è¡Œä»»ä½•æ“ä½œ
    print(f"ğŸ”„ [å…¨å±€æ—‹è½¬æ§åˆ¶] æ—‹è½¬åŠŸèƒ½å·²å…¨å±€ç¦ç”¨ï¼Œ{component}ç»„ä»¶æ“ä½œæ— æ•ˆ")


def get_rotation_status() -> Dict[str, Any]:
    """
    è·å–å½“å‰æ—‹è½¬çŠ¶æ€ä¿¡æ¯
    
    Returns:
        æ—‹è½¬çŠ¶æ€å­—å…¸
    """
    manager = get_rotation_manager()
    return manager.get_debug_info()


def print_rotation_status():
    """æ‰“å°å½“å‰æ—‹è½¬çŠ¶æ€"""
    status = get_rotation_status()
    print("ğŸ”„ [å…¨å±€æ—‹è½¬çŠ¶æ€]")
    print(f"   å…¨å±€å¯ç”¨: {status['enabled']}")
    print(f"   æ—‹è½¬è§’åº¦: {status['angle']}Â°")
    print(f"   æ—‹è½¬æ–¹å‘: {status['direction']}")
    print(f"   ç»„ä»¶çŠ¶æ€:")
    for component, enabled in status['components'].items():
        print(f"     {component}: {'âœ…' if enabled else 'âŒ'}")


# å·²ç¦ç”¨æ‰€æœ‰æ—‹è½¬åŠŸèƒ½
def reset_rotation_to_defaults():
    """é‡ç½®æ—‹è½¬é…ç½®ä¸ºé»˜è®¤å€¼ - å·²ç¦ç”¨ï¼Œæ— æ•ˆæ“ä½œ"""
    # æ—‹è½¬åŠŸèƒ½å·²å…¨å±€ç¦ç”¨ï¼Œä¸æ‰§è¡Œä»»ä½•æ“ä½œ
    print("ğŸ”„ [å…¨å±€æ—‹è½¬æ§åˆ¶] æ—‹è½¬åŠŸèƒ½å·²å…¨å±€ç¦ç”¨ï¼Œé‡ç½®æ“ä½œæ— æ•ˆ")


# å¿«æ·æ§åˆ¶å‡½æ•° - å·²ç¦ç”¨æ‰€æœ‰æ—‹è½¬åŠŸèƒ½
def disable_all_rotation():
    """ç¦ç”¨æ‰€æœ‰æ—‹è½¬ - å·²ç¦ç”¨ï¼Œæ— æ•ˆæ“ä½œ"""
    print("ğŸ”„ [å…¨å±€æ—‹è½¬æ§åˆ¶] æ—‹è½¬å·²å…¨å±€ç¦ç”¨")


def enable_all_rotation():
    """å¯ç”¨æ‰€æœ‰æ—‹è½¬ - å·²ç¦ç”¨ï¼Œæ— æ•ˆæ“ä½œ"""
    print("ğŸ”„ [å…¨å±€æ—‹è½¬æ§åˆ¶] æ—‹è½¬åŠŸèƒ½å·²å…¨å±€ç¦ç”¨ï¼Œå¯ç”¨æ“ä½œæ— æ•ˆ")


def set_clockwise_90():
    """è®¾ç½®ä¸ºé¡ºæ—¶é’ˆ90åº¦æ—‹è½¬ - å·²ç¦ç”¨ï¼Œæ— æ•ˆæ“ä½œ"""
    print("ğŸ”„ [å…¨å±€æ—‹è½¬æ§åˆ¶] æ—‹è½¬åŠŸèƒ½å·²å…¨å±€ç¦ç”¨ï¼Œè§’åº¦è®¾ç½®æ— æ•ˆ")


def set_counter_clockwise_90():
    """è®¾ç½®ä¸ºé€†æ—¶é’ˆ90åº¦æ—‹è½¬ - å·²ç¦ç”¨ï¼Œæ— æ•ˆæ“ä½œ"""
    print("ğŸ”„ [å…¨å±€æ—‹è½¬æ§åˆ¶] æ—‹è½¬åŠŸèƒ½å·²å…¨å±€ç¦ç”¨ï¼Œè§’åº¦è®¾ç½®æ— æ•ˆ")


if __name__ == "__main__":
    # æµ‹è¯•è„šæœ¬ - æ—‹è½¬åŠŸèƒ½å·²ç¦ç”¨
    print("ğŸš€ å…¨å±€æ—‹è½¬æ§åˆ¶æµ‹è¯• - æ—‹è½¬åŠŸèƒ½å·²ç¦ç”¨")
    print_rotation_status()
    print("\næµ‹è¯•è®¾ç½®æ—‹è½¬ï¼ˆå·²ç¦ç”¨ï¼‰...")
    set_clockwise_90()
    print_rotation_status()